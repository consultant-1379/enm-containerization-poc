heat_template_version: 2015-04-30
description: ENM Network Security Group Stack

parameters:
  enm_internal_security_group_name:
    default: enm_lb_security_group
    type: string

resources:
  enm_security_group:
    type: OS::Neutron::SecurityGroup
    properties:
      name: { get_param: enm_internal_security_group_name }
      rules:
      - protocol: icmp
        direction: egress
      - protocol: icmp
        ethertype: IPv6
        direction: egress
      - protocol: tcp
        port_range_min: 1
        port_range_max: 65535
        direction: egress
      - protocol: tcp
        port_range_min: 1
        port_range_max: 65535
        ethertype: IPv6
        direction: egress
      - protocol: udp
        port_range_min: 1
        port_range_max: 65535
        ethertype: IPv6
        direction: egress
      - protocol: udp
        port_range_min: 1
        port_range_max: 65535
        direction: egress
      - protocol: icmp
        direction: ingress
      - protocol: icmp
        ethertype: IPv6
        direction: ingress
      - protocol: tcp
        port_range_min: 1
        port_range_max: 65535
        direction: ingress
      - protocol: tcp
        port_range_min: 1
        port_range_max: 65535
        ethertype: IPv6
        direction: ingress
      - protocol: tcp
        port_range_min: 22
        port_range_max: 22
        direction: ingress
      - protocol: tcp
        port_range_min: 80
        port_range_max: 80
        direction: ingress
      - protocol: tcp
        port_range_min: 443
        port_range_max: 443
        direction: ingress
      - protocol: udp
        port_range_min: 1
        port_range_max: 65535
        direction: ingress
      - protocol: udp
        port_range_min: 1
        port_range_max: 65535
        ethertype: IPv6
        direction: ingress        
outputs:
  OS::stack_id:
    value: { get_resource: enm_security_group}

