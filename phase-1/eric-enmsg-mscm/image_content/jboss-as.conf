#######################################################################################################################
# Standalone configuration XML to start container with                                                                #
#######################################################################################################################
JBOSS_CONFIG=standalone-enm.xml

#######################################################################################################################
# Set JVM Max/Min memory                                                                                              #
#######################################################################################################################
MEMORY_MAX=4096

#######################################################################################################################
# Perm Gen Memory in MB                                                                                               #
#######################################################################################################################
# JDK7 Mem parameter
PERM_GEN=670
# JDK>7 Mem parameter
MAX_META_SPACE=670

#######################################################################################################################
# Configuration option to disable/enable logging to FILE. Set it to:                                                  #
# true - to enable logging to FILE                                                                                    #
# false - to disable logging to FILE                                                                                  #
#######################################################################################################################
LOG_TO_FILE=true

_HOSTNAME='/bin/hostname -s'
THIS_HOST=$($_HOSTNAME)

GC_OPTION='UseG1GC'

# Performance Optimization
XX_OPTIONS="$XX_OPTIONS -XX:+UnlockExperimentalVMOptions -XX:+AggressiveOpts -XX:+UseFastAccessorMethods -XX:+DoEscapeAnalysis"
XX_OPTIONS="$XX_OPTIONS -XX:ParallelGCThreads=4"
# Runtime Memory Optimization
XX_OPTIONS="$XX_OPTIONS -XX:+UseStringDeduplication"

# Print GC options
XX_OPTIONS="$XX_OPTIONS -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCDateStamps"
# GC log path and options
XX_OPTIONS="$XX_OPTIONS -Xloggc:/ericsson/3pp/jboss/standalone/log/server-gc.log"
XX_OPTIONS="$XX_OPTIONS -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=5 -XX:GCLogFileSize=10M"
# Additional PrintGC options
XX_OPTIONS="$XX_OPTIONS -XX:+PrintTenuringDistribution"
XX_OPTIONS="$XX_OPTIONS -XX:+PrintAdaptiveSizePolicy"
XX_OPTIONS="$XX_OPTIONS -XX:+PrintPromotionFailure"
#XX_OPTIONS="$XX_OPTIONS -XX:+PrintGCApplicationStoppedTime"
#XX_OPTIONS="$XX_OPTIONS -XX:+PrintStringDeduplicationStatistics"
#
XX_OPTIONS="$XX_OPTIONS -Dmed_service_protocol_info=CM -Dmed_service_consumer_channelId=//global/ClusteredMediationServiceConsumerCM0"
XX_OPTIONS="$XX_OPTIONS -Dsdk.eventbus.jms.concurrent.queue.listeners.number.CmMediationServiceConsumer_0=50"
XX_OPTIONS="$XX_OPTIONS -Dsdk.eventbus.jms.concurrent.connectionfactory.CmMediationServiceConsumer_0=java:/MSConsumerConnectionFactory"
XX_OPTIONS="$XX_OPTIONS -Dnetwork_element_notifications_channelId=NetworkElementNotifications -Dmed_service_clear_messages_interval=3000"
XX_OPTIONS="$XX_OPTIONS -Dmed_service_clear_messages_max_timeout=120000"
# Tells mediation to wait for a full deployment
XX_OPTIONS="$XX_OPTIONS -DwaitForFullDeployment"

#######################################################################################################################
# FlightRecorder Option                                                                                               #
#######################################################################################################################
#XX_OPTIONS="$XX_OPTIONS -XX:+UnlockCommercialFeatures -XX:+FlightRecorder -XX:FlightRecorderOptions=defaultrecording=true"

#######################################################################################################################
# Additional Diagnostic VM Options (Do not use them on Production)                                                    #
#######################################################################################################################
#XX_OPTIONS="$XX_OPTIONS -XX:+UnlockDiagnosticVMOptions" # Must be first
#XX_OPTIONS="$XX_OPTIONS -XX:+PrintSafepointStatistics" # Also prints to stdout
#XX_OPTIONS="$XX_OPTIONS -XX:+LogVMOutput"
#XX_OPTIONS="$XX_OPTIONS -XX:LogFile=/ericsson/3pp/jboss/standalone/log/jvm.log"
